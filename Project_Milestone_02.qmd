---
title: "Project_Milestone_02"
author: "Ngan Nguyen, Nicole Fernandez, Shirley Sui"
format: html
editor: visual
---

## Project Milestone #2

### [Description of dataset]{.underline}

#### *What is the data source? (1-2 sentences on where the data is coming from, dates included, etc.)*

The data was obtained from the project github repository for the PHW251 R for Public Health course. The data we are using for this project is from a simulated flu outbreak and vaccine update in California. The data is simulated data that represents [describe generally/briefly what is the data] for the entire state of California during [describe the time period]. 

The three datasets include data on the following (as described in the project page for Scenario 1):

1.  Dataset one (sim_flu_CA.csv) contains weekly data about flu cases and case severity by demographic categories (age category, race, sex) and geographic categories (county) for California counties (except for Los Angeles county);

2.  Dataset two (sim_flu_LACounty.csv) contains population data by similar demographic and geographic categories for Los Angeles county.

3.  Dataset three (ca_vax_rates_quarter.csv) contains quarterly COVID vaccination rates by county and age category.

#### *How does the dataset relate to the group problem statement and question?*

Our goal is to determine if, in California: 1. COVID vaccination rates reflect flu vaccination rates in the population 2. There is a correlation between COVID vaccination and flu rates and/or severity

The datasets include the information needed for data analysis related to these two questions. Specifically, dataset one and two contain flu case and case severity data for all California counties, and dataset three contains COVID vaccination rate data by county.

The only data not directly included is flu vaccination rates, but we can probably infer the relationship between COVID and flu vaccination rates based on flu case rate and case severity data analysis.

### [Import statements for all datasets]{.underline}

-   NOTE: Please use datasets available in the PHW251 Project Data github repo. (this is important to make sure everyone is using the same datasets)
-   Use appropriate import function and package based on the type of file
-   Utilize function arguments to control relevant components (i.e. change column types, column names, missing values, etc.)
-   Document the import process

```{r load libraries}
# Load tidyverse for all data cleaning packages, including readr()
library(tidyverse)
```

```{r import_data_ca_vax_rates_quarter.csv -- Ngan Nguyen}
#Load the readr package for CSV file handling
library(readr)

#Import the CSV file 'scenario_1/ca_vax_rates_quarter.csv' into a Dataframe in R using read_csv function
ca_vax_rates_quarter <- read_csv("scenario_1/ca_vax_rates_quarter.csv")


#Assign it as "ca_vax_rates_quarter_raw" to distinguish it as raw data
ca_vax_rates_quarter_raw <- ca_vax_rates_quarter
print(ca_vax_rates_quarter_raw)
```

```{r import_data_sim_flu_CA.csv -- Shirley Sui}
# load dataset from group project git repo using read_csv
# assign it as "sim_flu_CA_raw" to distinguish it as raw data
sim_flu_CA_raw <- read_csv('./scenario_1/sim_flu_CA.csv')
```

```{r import_data_sim_flu_LACounty.csv -- Nicole Fernandez}

#Load the readr package for CSV file handling
library(readr)

#Import the CSV file 'scenario_1/sim_flu_LACounty.csv' into a Dataframe in R using read_csv function
sim_flu_LACounty <- read_csv("scenario_1/sim_flu_LACounty.csv")


#Assign it as "sim_flu_LACounty_raw" to distinguish it as raw data
sim_flu_LACounty_raw <- sim_flu_LACounty
View(sim_flu_LACounty_raw)

```

-   Clean up column names (recommend using snake case, which is lower case text with underscores between words)

```{r clean_up_names_ca_vax_rates_quarter.csv -- Ngan Nguyen}

# Get the current column names
current_colnames <- colnames(ca_vax_rates_quarter)

# Convert column names to snake case
new_colnames <- tolower(gsub(" ", "_", current_colnames))

# Assign the new column names to the data frame
colnames(ca_vax_rates_quarter_raw) <- new_colnames

# Print the updated column names
colnames(ca_vax_rates_quarter_raw)

```

![current flu data column names](column_names_flu.png)

```{r clean_up_names_sim_flu_CA.csv -- Shirley Sui}
# rename columns to match the LA County data
# then select only the columns that the LA County dataset has
sim_flu_CA_new <- sim_flu_CA_raw %>%
  mutate(dx_new = new_infections, recovered_new = new_recovered, susceptible = count_susceptible, infected_current = current_infected, infected_cumulative = cumulative_infected, recovered_cumulative = cumulative_recovered, severe_new = new_severe, severe_cumulative = cumulative_severe, age_category = age_cat, race_eth = race_ethnicity, dt_report = report_date, dt_dx = dt_diagnosis) %>%
  select(county, dx_new, recovered_new, susceptible, infected_current, infected_cumulative, recovered_cumulative, severe_new, severe_cumulative, age_category, sex, race_eth, dt_report, dt_dx, pop)
  
# view column names from dataframe to make sure we got what we needed
colnames(sim_flu_CA_new)
```

```{r clean_up_names_sim_flu_LACounty.csv -- Nicole Fernandez}


colnames(sim_flu_LACounty_raw) <- tolower(gsub(' ', '_', colnames(sim_flu_LACounty_raw)))


#Load the dplyr package in order to perform following functions or data manipulation for columns
library(dplyr)


#Arrange column names from dataset in specific order as written in code
sim_flu_LACounty_raw <- select(sim_flu_LACounty_raw, c(dx_new, recovered_new, susceptible, infected_current, infected_cumulative, recovered_cumulative, severe_new, severe_cumulative, age_category, sex, race_eth, dt_report, dt_dx))


#View column names from dataframe to make sure they are in the desired order
colnames(sim_flu_LACounty_raw)



```

### [Identify data types for 5+ data elements/columns/variables]{.underline}

#### *Identify 5+ data elements required for your specified scenario. If \<5 elements are required to complete the analysis, please choose additional variables of interest in the data set to explore in this milestone.*

From the flu case rates and case severity datasets: 
-  county 
-  age_category 
-  race_eth 
-  dt_dx
-  dx_new
-  severe_new 
-  susceptible 
-  pop

From the COVID vaccination rate data: 
-  County Name 
-  Demographic Category 
-  Demographic Value 
-  Dt Admin 
-  Total Partial Vaccinated 
-  Cumulative Fully Vaccinated 
-  Cumulative At Least ONe Dose 
-  Cumulative Unvaccinated 
-  Cumulative Up To Date Vax 
-  Estimated Population

#### *Utilize functions or resources in RStudio to determine the types of each data element (i.e. character, numeric, factor)*

```{r data_types -- Ngan Nguyen}
### we might need to change _raw to the "new" dataframes we set up above ###
### not sure if we want to select just the columns we specified above? ###

# Figure out data types of each column in the "ca_vax_rates_quarter_raw" data frame  
ca_vax_col_types <- data.frame(
  coltypes_ca_vax = sapply(ca_vax_rates_quarter_raw, typeof),
  stringsAsFactors = FALSE
)

# Figure out data types of each column in the "sim_flu_CA_raw" data frame  
sim_flu_CA_col_types <- data.frame(
  coltypes_flu_CA = sapply(sim_flu_CA_raw, typeof),
  stringsAsFactors = FALSE
)

# Figure out data types of each column in the "sim_flu_LACounty_raw" data frame  
sim_flu_LACounty_col_types <- data.frame(
  coltypes_flu_LACounty = sapply(sim_flu_LACounty_raw, typeof),
  stringsAsFactors = FALSE
)

print(ca_vax_col_types)
print(sim_flu_CA_col_types)
print(sim_flu_LACounty_col_types)

```

#### *Identify the desired type/format for each variable---will you need to convert any columns to numeric or another type?* -- Shirley Sui

For ca_vax_rates,
-  demographic_value should be a factor
-  dt_admin should be a date
-  quarter should be a factor?

For the sim_flu data (both CA and LA County),
-  age_category should be a factor
-  race_eth should be a factor
-  dt_dx should be a date

### [Provide a basic description of the 5+ data elements]{.underline}






#Select desired 5+ data elements from each dataframe
selected_columns_sim_flu_LACounty_raw <- sim_flu_LACounty_raw[, c("age_category", "race_eth", "dt_dx", "dx_new", "severe_new", "susceptible")]

selected_columns_vax_rates_quarter_raw <- ca_vax_rates_quarter_raw[, c("county_name", "demographic_category", "demographic_value", "dt_admin", "total_partial_vaccinated", "cumulative_fully_vaccinated", "cumulative_at_least_one_dose", "cumulative_unvaccinated", "cumulative_up_to_date_vax", "estimated_population")]


selected_columns_sim_flu_CA_new <- sim_flu_CA_new[, c("county", "pop")]


# Combine the selected columns into a new dataframe
combined_dataframe <- cbind(selected_columns_sim_flu_LACounty_raw, selected_columns_vax_rates_quarter_raw, selected_columns_sim_flu_CA_new)

# Calculate mean for each selected column
mean_values <- sapply(combined_dataframe, mean)

# Calculate median for each selected column
median_values <- sapply(combined_dataframe, median)

# Calculate range for each selected column
range_values <- sapply(combined_dataframe, function(x) max(x) - min(x))

# Display the results
print("Mean:")
print(mean_values)

print("Median:")
print(median_values)

print("Range:")
print(range_values)


-   Numeric: mean, median, range
-   Character: unique values/categories
-   or any other descriptives that will be useful to the analysis

```{r data_summary -- Nicole Fernandez}

```

### [Describe cleaning that each data source may need]{.underline}

#### *NOTE: There is no requirement for any data cleaning in this milestone. Please just list out the anticipated data cleaning needed.*

#### *Examples:*

-   Data elements that need to be converted to a different type

-   Data elements that need cleaning or re-categorization

    -   Demographic Category & Demographic Value in the COVID vaccination dataset will have to be cleaned up to match the columns in the flu datasets.

-   Data elements that may be used for future joins (i.e. state, county) County

    -   (sim_flu_LACounty.csv data will need to be joined into the sim_flu_CA.csv dataset)
